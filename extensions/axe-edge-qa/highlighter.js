function t(t){const e=t.ownerDocument.defaultView;let o=t,i=o.getBoundingClientRect(),n=!1;for(;o.parentElement&&(!i.height||!i.width);)n=!0,o=o.parentElement,i=o.getBoundingClientRect();const r=e.getComputedStyle(o);let a=e.frameElement,l=i,s=l.top+e.pageYOffset,h=l.left+e.pageXOffset;if(a)for(s=l.top,h=l.left;a;){const{frameElement:t,pageYOffset:e,pageXOffset:o}=a.ownerDocument.defaultView;l=a.getBoundingClientRect(),s+=l.top+e,h+=l.left+o,a=t}const d=function(t,e=window.visualViewport||{width:window.innerWidth,height:window.innerWidth}){return{top:t.top+t.height<0,bottom:t.top>e.height,left:t.left+t.width<0,right:t.left>e.width}}(e.frameElement?{top:s-window.pageYOffset,left:h-window.pageXOffset,height:i.height,width:i.width}:i),c=t=>+t.replace("px","")||0,{height:p,width:g}=e.visualViewport||{width:e.innerWidth,height:e.innerHeight};return{hidden:n,offscreen:d.top||d.bottom||d.left||d.right,offscreenTop:d.top,offscreenBottom:d.bottom,offscreenLeft:d.left,offscreenRight:d.right,fullscreen:s<=0&&h<=0&&i.width>=g&&i.height>=p,top:s,left:h,width:i.width,height:i.height,margin:{top:c(r.marginTop),right:c(r.marginRight),bottom:c(r.marginBottom),left:c(r.marginLeft)},border:{top:c(r.borderTopWidth),right:c(r.borderRightWidth),bottom:c(r.borderBottomWidth),left:c(r.borderLeftWidth)},padding:{top:c(r.paddingTop),right:c(r.paddingRight),bottom:c(r.paddingBottom),left:c(r.paddingLeft)}}}const e=new Set,o=t=>1===t.length?t[0]:t;var i={sanitize:t=>n().commons.text.sanitize(t),sanitizeContext(t){if(!t.ownerDocument||t.ownerDocument===document)return t;const e=n();e._selectorData=e.utils.getSelectorData(e.utils.getFlattenedTree());const o=[e.utils.getSelector(t)];let i=t.ownerDocument.defaultView.frameElement;for(;i;)o.unshift(e.utils.getSelector(i)),i=i.contentWindow.parent.frameElement;return o.flat()},validLangCheck(t){const e=n(),o=e.utils.getBaseLang(t);return e.utils.validLangs().includes(o)},isOffscreen:(...t)=>o(t.map(a)),isHidden:(...t)=>o(t.map(l)),isVisible:(t,e=!1)=>o(function(t,e){return n(t,e).commons.dom.isVisible(t,!1,!0)}(t,e)),isSRVisible:(...t)=>o(t.map(s)),name:(...t)=>o(t.map(r)),isOpaque:(...t)=>o(t.map(g)),getRoleType:(...t)=>o(t.map(h)),getRole:(...t)=>o(t.map(d)),getContrast:(...t)=>o(t.map(c)),isWidgetRole:t=>n().commons.aria.lookupTable.rolesOfType.widget.includes(t),isFocusable:(...t)=>o(t.map(m)),getTabbableElements:t=>o(function(t){const e=n(t,!0),o=p(e,t);return e.commons.dom.getTabbableElements(o).map((({actualNode:t})=>t))}(t)),getFlattenedTree(t){const e=n();return e._tree=e.utils.getFlattenedTree(t.ownerDocument),e._tree},getSource:t=>new(n().utils.DqElement)(t).source,getSelector(t){const e=n();return e._selectorData||(e._selectorData=e.utils.getSelectorData(e.utils.getFlattenedTree())),e.utils.getSelector(t)},getElementStack(t){const e=n();return e.teardown(),e.setup(),e.commons.dom.getElementStack(t)},table:{isRowHeader:t=>n(t).commons.table.isRowHeader(t),isColumnHeader:t=>n(t).commons.table.isColumnHeader(t),toGrid(t){const e=n(t);return e.teardown(),e.setup(),e.commons.table.toGrid(t)},isDataTable:t=>n(t).commons.table.isDataTable(t),isHeader:t=>n(t).commons.table.isHeader(t),getHeaders:(t,e)=>n(t,!0).commons.table.getHeaders(t,e),getCellPosition:(t,e)=>n(t).commons.table.getCellPosition(t,e),traverse(t,e,o,i){if(!o[0]?.[0])return;return n(o[0][0]).commons.table.traverse(t,e,o,i)}},setupTrees:function(){f(),e.clear()},cleanupTrees:f};function n(t=document.documentElement,o=!1){const i=t.ownerDocument,n=i.defaultView.axe;if(!n)throw new ReferenceError("axe was not found in this context");const r=n._tree&&n._tree[0];return(o||!e.has(n)||r&&!n.utils.getNodeFromTree(r,t))&&(n._tree=n.utils.getFlattenedTree(i),e.add(n)),n}function r(t){const e=n(t),o=p(e,t);return o?e.commons.text.accessibleTextVirtual(o):""}function a(t){return n(t).commons.dom.isOffscreen(t)}function l(t){return n(t).commons.utils.isHidden(t)}function s(t){return n(t).commons.dom.isVisible(t,!0,!1)}function h(t){const e=n(t),o=function(t){return n(t).commons.aria.implicitRole(t)}(t),i=e.commons.aria.lookupTable.role[o];return i&&i.type}function d(t){const e=n(t);return function(t){return!!n(t).utils.getNodeFromTree(t)}(t)?e.commons.aria.getRole(t):null}function c(t){const e=n(t);let o;try{const i=e.commons.color.getForegroundColor(t),n=e.commons.color.getBackgroundColor(t);o=e.commons.color.getContrast(n,i)}catch(t){console.error(t)}return o}function p(t,e){return t._tree||(t._tree=t.utils.getFlattenedTree(e.ownerDocument)),t.utils.getNodeFromTree(t._tree[0],e)}function g(t){return n(t).commons.dom.isOpaque(t)}function m(t){return n(t).commons.dom.isFocusable(t)}function f(){e.forEach((t=>{t._tree=null,t._cache.clear()}))}const{getRole:u,getContrast:b,name:x,isHidden:w}=i;function y(t){const e=new Map;try{const o=function(t){const e=b(t);if(!e)return;return{name:"Contrast",value:`\n      <span class="contrast-aa">AA</span> ${Math.floor(100*e)/100}\n      ${e<4.5?'<svg overflow="visible" preserveAspectRatio="none" viewBox="0 0 24 24" width="14" height="14"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31A7.902 7.902 0 0112 20zm6.31-3.1L7.1 5.69A7.902 7.902 0 0112 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z" vector-effect="non-scaling-stroke" fill="#d93251"></path></svg>':'<svg overflow="visible" preserveAspectRatio="none" viewBox="0 0 24 24" width="14" height="14"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" vector-effect="non-scaling-stroke" fill="#32a852"></path></svg>'}\n    `}}(t),i=function(t){const e=u(t);if(e)return{name:"Role",value:e}}(t),n=i&&function(t){const e=x(t);return{name:"Accessible Text",value:w(t)?"<em>hidden</em>":e||"<em>empty</em>"}}(t);[o,i,n].filter(Boolean).forEach((({name:t,value:o})=>{e.set(t,o)}))}catch(t){console.error(t)}return e}const v=document.createElement("template");v.innerHTML='\n  <style>\n    :host{--high-contrast-color-outline:#c11bde;--high-contrast-color-shadow:#e267ff}.theme--high-contrast{border:3px solid var(--high-contrast-color-outline);box-shadow:0 0 10px 4px var(--high-contrast-color-shadow);max-width:calc(100% - 6px);padding:3px;transform:translate(-6px,-6px)}.theme--high-contrast.highlight--fullpage{border:3px solid var(--high-contrast-color-outline);bottom:0!important;left:0!important;position:fixed!important;right:0!important;top:0!important;transform:none}.theme--high-contrast:not(.highlight--offscreen):not(.highlight--fullpage)+#tooltip.tooltip--bottom{transform:translateY(6px)}.theme--high-contrast:not(.highlight--offscreen):not(.highlight--fullpage)+#tooltip.tooltip--top{transform:translateY(-6px)}.theme--devtools{--theme--border-color:#ffff3273;--theme--margin-color:#ff960080;--theme--padding-color:#23b45059;--theme--content-color:#1e3cff66}.theme--devtools.highlight--fullpage{bottom:0!important;left:0!important;position:fixed!important;right:0!important;top:0!important;transform:none}.theme--selection:before{border:3px dashed var(--high-contrast-color-outline);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.theme--selection.highlight--page{border:3px dashed var(--high-contrast-color-outline);bottom:0!important;left:0!important;position:fixed!important;right:0!important;top:0!important;transform:none}.theme--selection.highlight--page:before{display:none}.theme--selected:before{border:3px solid var(--high-contrast-color-outline);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.theme--selected.highlight--page{border:3px solid var(--high-contrast-color-outline);bottom:0!important;left:0!important;position:fixed!important;right:0!important;top:0!important;transform:none}.theme--selected.highlight--page:before{display:none}:host{--badge-color-outline:#3c7aae}.theme--badge:before{border:3px solid var(--badge-color-outline);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.theme--badge:after{align-items:center;background-color:var(--badge-color-outline);border:3px solid #fff;color:#fff;content:var(--axe-highlight-badge-content,counter(badge));counter-reset:badge var(--axe-highlight-counter);display:flex;font-family:monospace;font-size:13px;font-weight:500;height:1.5em;justify-content:center;left:3px;min-width:1.5em;position:absolute;top:3px}.theme--ml:before{border:3px solid var(--high-contrast-color-outline);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.theme--ml:after{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjkiIGhlaWdodD0iMjkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMTQuNSIgY3k9IjE0LjUiIHI9IjEzLjUiIGZpbGw9IiMwYjE0MWMiIHN0cm9rZT0iI2Q0ZGRlMCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHBhdGggZD0iTTYuMjMgMTIuNThoLjkydjUuNTFoLS45MmEuOTEuOTEgMCAwIDEtLjkyLS45MVYxMy41YS45Mi45MiAwIDAgMSAuOTItLjkyem0xNC43LTEuMzhWMTlhMS44NCAxLjg0IDAgMCAxLTEuODQgMS44NEg5LjkxQTEuODQgMS44NCAwIDAgMSA4LjA3IDE5di03LjhhMi4yOSAyLjI5IDAgMCAxIDIuMjktMi4yOWgzLjIyVjcuMDdhLjkyLjkyIDAgMCAxIDEuODQgMHYxLjg0aDMuMjJhMi4yOSAyLjI5IDAgMCAxIDIuMjkgMi4yOXptLTggMi4zYTEuMTUgMS4xNSAwIDEgMC0xLjE1IDEuMTUgMS4xNSAxLjE1IDAgMCAwIDEuMTUtMS4xNXptLS4yMyAzLjY4aC0xLjg4di45MWgxLjg0em0yLjc2IDBoLTEuODh2LjkxaDEuODR6bTMtMy42OGExLjE1IDEuMTUgMCAxIDAtMS4xNSAxLjE1IDEuMTYgMS4xNiAwIDAgMCAxLjE1LTEuMTV6bS0uMjMgMy42OGgtMS44OXYuOTFoMS44NHptNS41MS0zLjY4djMuNjhhLjkyLjkyIDAgMCAxLS45Mi45MWgtLjkydi01LjUxaC45MmEuOTIuOTIgMCAwIDEgLjkyLjkyeiIgZmlsbD0iIzc2Y2ZlOCIvPjwvc3ZnPg==");background-repeat:no-repeat;content:"";height:29px;left:-5px;position:absolute;top:-5px;width:29px}\n    :host{--base-font-size:12px;height:0!important;left:0!important;pointer-events:none!important;position:absolute!important;top:0!important;width:100%!important}:host(.highlight--hide){display:none!important}#axe-highlight{display:flex;flex:1;pointer-events:none;position:absolute;z-index:2147483647}#border{border-color:var(--theme--border-color,#0000)}#border,#margin{border-style:solid;display:flex;flex:1}#margin{border-color:var(--theme--margin-color,#0000)}#content{background-clip:content-box;background-color:var(--theme--content-color,#0000);border-color:var(--theme--padding-color,#0000);border-style:solid;box-sizing:border-box;display:flex;flex:1;height:100%;width:100%}\n    :host{--tooltip-background-color:#f9f9f9;--tooltip-border-color:#333;--tooltip-shadow-color:#0003;--tooltip-tag-name-color:#2e40a0;--tooltip-tag-identifier-color:#c53406;--tooltip-text-color:#02101a;--tooltip-label-color:#666;--tooltip-text-accent-color:#4d4d4d}#tooltip{background:var(--tooltip-background-color);border:3px solid var(--tooltip-border-color);border-radius:3px;box-shadow:0 0 6px var(--tooltip-shadow-color);color:var(--tooltip-text-color);font-family:monospace;font-size:var(--base-font-size);margin:.5rem 0;max-width:20rem;padding:.6rem;position:absolute;white-space:nowrap;z-index:2147483647}#tooltip p{margin:0}#tooltip svg{height:13px;margin-bottom:-2px;width:13px}#tooltip:after,#tooltip:before{border:.5rem solid #0000;border-bottom:.5rem solid var(--tooltip-background-color);border-top:none;content:"";display:block;position:absolute}#tooltip:after{top:0;transform:translateY(1px) translateY(-100%);z-index:2}#tooltip:before{border-bottom:.5rem solid var(--tooltip-border-color);top:0;transform:translateY(-3px) translateY(-100%);z-index:1}#tooltip.tooltip--top:before{top:100%;transform:rotate(180deg) translateY(-3px)}#tooltip.tooltip--top:after{top:100%;transform:rotate(180deg) translateY(1px)}#tooltip.tooltip--right{margin-right:-1.3rem}#tooltip.tooltip--right:after,#tooltip.tooltip--right:before{right:.6rem}#tooltip.tooltip--fullscreen{bottom:auto!important;left:10px!important;margin:0;position:fixed!important;top:10px!important;transform:none}#tooltip.tooltip--fullscreen:after,#tooltip.tooltip--fullscreen:before{display:none}#tag{display:grid;grid-template-columns:max-content auto 1fr min-content}#tag-name{color:var(--tooltip-tag-name-color)}#tag-identifier{-webkit-line-clamp:3;-webkit-box-orient:vertical;color:var(--tooltip-tag-identifier-color);display:-webkit-box;overflow:hidden;white-space:normal}#tag-visibility{color:var(--tooltip-text-accent-color);font-style:italic;margin-left:1em}#tag-offscreen{margin-left:1em}#tag-dimensions{color:var(--tooltip-text-accent-color);font-family:monospace;justify-self:right;margin-left:1em}#hidden-eye{position:relative}#hidden-eye:before{background-color:#02101a;border:1px solid #fff;content:"";display:block;height:1px;left:-1px;position:absolute;top:7px;transform:rotate(-45deg);width:16px;z-index:1}#accessible-text{color:var(--tooltip-text-accent-color);white-space:normal}#attributes{grid-column-gap:1rem;grid-row-gap:.2rem;align-items:center;border-top:1px solid #ccc;display:grid;font-family:sans-serif;grid-auto-rows:minmax(1.6em,auto);grid-template-columns:1fr auto;margin:.6rem 0 0;padding:.6rem 0 0}#attributes dd,#attributes dl{margin:0}#attributes dt{color:var(--tooltip-label-color)}#attributes dd{-webkit-line-clamp:3;-webkit-box-orient:vertical;justify-self:right;text-align:right;white-space:normal}.contrast-aa{border:1px solid #4d4d4d;color:#4d4d4d;display:inline-block;font-family:monospace;font-size:9px;line-height:1em;padding:2px;vertical-align:text-bottom}\n  </style>\n  <style id="position"></style>\n  <div id="axe-highlight" class="theme--high-contrast">\n    <div id="margin">\n      <div id="border">\n        <div id="content"></div>\n      </div>\n    </div>\n  </div>\n  <div id="tooltip" style="display: none"></div>\n';const M="tooltip--top",L="tooltip--bottom",T="tooltip--left",E="tooltip--right",I="tooltip--fullscreen",j="highlight--fullpage",k="highlight--offscreen",D="highlight--hide",A=320,C=({top:t,right:e,bottom:o,left:i})=>`\n    border-top-width: ${Math.max(t,0)}px;\n    border-right-width: ${Math.max(e,0)}px;\n    border-bottom-width: ${Math.max(o,0)}px;\n    border-left-width: ${Math.max(i,0)}px;\n  `.replace(/[\s\n]/g,""),S="axe-highlighter";class H{static tagName="axe-highlighter";constructor(e){if(!e)return;const o=e.ownerDocument;let i;this.target=e,this.axeHighlighter=o.createElement(H.tagName);try{i=this.axeHighlighter.attachShadow({mode:"open"})}catch(t){i=this.axeHighlighter.shadowRoot}this.axeHighlighter.style.setProperty("--axe-highlight-counter",O.size+1),i.appendChild(v.content.cloneNode(!0)),this.position=i.getElementById("position"),this.highlight=i.getElementById("axe-highlight"),this.tooltip=i.getElementById("tooltip"),this.cachedLayout=t(e)}updatePosition(){if(!this.target.isConnected)return;const{width:e,height:o,margin:i,border:n,padding:r,hidden:a,offscreen:l,fullscreen:s}=this.cachedLayout=t(this.target);let{top:h,left:d}=this.cachedLayout;const{position:c}=this,{height:p,width:g,pageTop:m,pageLeft:f}=window.visualViewport||{width:window.innerWidth,height:window.innerHeight,pageTop:window.pageYOffset,pageLeft:window.pageXOffset},u=h+o/2>p/2+m,b=d>g-320+f,x=this.axeHighlighter.offsetParent;if(x&&"static"!==getComputedStyle(x).getPropertyValue("position")){const t=x.getBoundingClientRect();h-=t.top+m,d-=t.left+f}c.textContent=`\n      #axe-highlight {\n        top: ${h-Math.max(i.top,0)}px;\n        left: ${d-Math.max(i.left,0)}px;\n      }\n\n      #tooltip {\n        top: ${u?"auto":`${o+(h+Math.max(i.bottom,0))}px`};\n        bottom: ${u?-(h-Math.max(i.top,0))+"px":"auto"};\n        left: ${b?"auto":`${d}px`};\n        right: ${b?g-d+"px":"auto"};\n      }\n\n      #margin {\n        ${C(i)}\n        height: ${o}px;\n        width: ${e}px;\n      }\n\n      #border {\n        ${C(n)}\n      }\n\n      #content {\n        ${C(r)}\n      }\n    `;const w=l&&!s;this.highlight.classList.toggle(j,s),this.highlight.classList.toggle(k,w),this.showTooltip({offscreen:w,hidden:a,flipY:u,flipX:b})}setTheme(t,e){const{classList:o}=this.highlight;o.remove(...o),o.add(`theme--${t}`);const{badgeContent:i}=e;i&&this.axeHighlighter.style.setProperty("--axe-highlight-badge-content",`'${i}'`)}setOptions(t){this.options=t}showTooltip({hidden:t=!1,offscreen:e=!1,flipX:o=!1,flipY:i=!1}={}){const{target:n,tooltip:r,cachedLayout:a,options:l}=this,{showTooltip:s,showMetadata:h}=l;if(!s)return r.innerHTML="",void(r.style.display="none");const{height:d,width:c,fullscreen:p}=a,g=n.tagName.toLowerCase(),m=n.getAttribute("id"),f=Array.from(n.classList).join("."),u=m?`#${m}`:f.length?`.${f}`:"";h&&!this.checks&&(this.checks=y(n));const b=this.checks&&Array.from(this.checks.entries()).map((([t,e])=>`<dt>${t}</dt><dd>${e}</dd>`));r.innerHTML=`\n      <div id="tag">\n        <strong id="tag-name">${g}</strong><span id="tag-identifier">${u}</span>\n        ${t?'<span id="tag-visibility">(hidden)</span>':""}\n        <span id="tag-dimensions">${parseFloat(c.toFixed(2))} x ${parseFloat(d.toFixed(2))}</span>\n      </div>\n      ${b&&b.length?`<dl id="attributes">${b.join("")}</d>`:""}\n    `,r.style.display="block",requestAnimationFrame((()=>{e?(this.tooltip.style.position="fixed",i?(this.tooltip.style.top="auto",this.tooltip.style.bottom="0"):this.tooltip.style.top="0"):(this.tooltip.style.position="",this.tooltip.style.top="",this.tooltip.style.bottom="");let t=L;i&&(t=M),t+=` ${o?E:T}`,r.classList.toggle(I,p),r.classList.remove(M,L,T,E),r.classList.add(...t.split(" "))}))}hide(){this.axeHighlighter.classList.add("highlight--hide")}show(){this.axeHighlighter.classList.remove("highlight--hide")}scrollIntoView(){this.target?.scrollIntoView({block:"center",behavior:"smooth",inline:"nearest"})}destroy(){this.axeHighlighter.parentNode?.removeChild(this.axeHighlighter),O.delete(this.target)}}const O=new Map;let $=!1,z=!1;function N(){z||(window.requestAnimationFrame((()=>{O.forEach((t=>t.updatePosition())),z=!1})),z=!0)}function R(){Array.from(O.values()).forEach((t=>t.destroy()))}function Y(){Array.from(O.values()).forEach((t=>t.show()))}function B(){Array.from(O.values()).forEach((t=>t.hide()))}function F(t){let e=null;return $||(window.addEventListener("resize",N),window.addEventListener("scroll",N,!0),window.addEventListener("beforeunload",(()=>{window.removeEventListener("resize",N),window.removeEventListener("scroll",N,!0)})),$=!0),{highlight:function({theme:o="high-contrast",themeOptions:i={},showMetadata:n=!0,showTooltip:r=!0}={}){const a=O.get(t);return e=a||new H(t),e.setTheme(o,i),e.setOptions({showTooltip:r,showMetadata:n}),a||(O.set(t,e),document.body.appendChild(e.axeHighlighter)),e.updatePosition(),e},destroy:function(){e&&(e.destroy(),e=null)},scrollIntoView:()=>e?.scrollIntoView()}}export{A as TOOLTIP_MAX_WIDTH,R as clearHighlights,F as createHighlighter,B as hideHighlights,D as highlightHidden,O as highlighters,Y as showHighlights,S as tagName};
